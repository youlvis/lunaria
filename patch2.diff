*** Begin Patch
*** Update File: assets/js/ui.js
@@
-  function mountScrollSpy(cats) {
-    const sections = cats
-      .map((c) => document.querySelector(`#sec-${slug(c)}`))
-      .filter(Boolean);
-    const off = calcOffset();
-
-    const obs = new IntersectionObserver(
-      (entries) => {
-        const visible = entries
-          .filter((e) => e.isIntersecting)
-          .sort((a, b) => b.intersectionRatio - a.intersectionRatio)[0];
-        if (!visible) return;
-        if (programmaticNav) return;
-        setActiveBySectionId(visible.target.id, "smooth");
-      },
-      {
-        root: null,
-        rootMargin: `-${off + 10}px 0px -60% 0px`,
-        threshold: [0, 0.1, 0.25, 0.5, 0.75, 1],
-      }
-    );
-
-    sections.forEach((s) => obs.observe(s));
-    window.addEventListener(
-      "resize",
-      () => {
-        calcOffset();
-        const active = $("#catTabs button.active");
-        if (active) ensureTabVisible(active, "auto");
-      },
-      { passive: true }
-    );
-  }
+  function mountScrollSpy(cats) {
+    const sections = cats
+      .map((c) => document.querySelector(`#sec-${slug(c)}`))
+      .filter(Boolean);
+    let off = calcOffset();
+
+    // Pick the section whose heading has crossed the sticky bar
+    const pickActive = () => {
+      if (programmaticNav) return;
+      off = calcOffset();
+      let current = sections[0] || null;
+      for (const s of sections) {
+        const top = s.getBoundingClientRect().top - off - 8; // 8px fudge so the change happens when the title hits the bar
+        if (top <= 0) current = s; else break;
+      }
+      if (current) setActiveBySectionId(current.id, "auto");
+    };
+
+    const obs = new IntersectionObserver(
+      () => {
+        // Defer to our deterministic picker to avoid ratio quirks on tall sections
+        pickActive();
+      },
+      {
+        root: null,
+        rootMargin: `-${off + 10}px 0px -60% 0px`,
+        threshold: [0, 0.01, 0.1, 0.25],
+      }
+    );
+
+    sections.forEach((s) => obs.observe(s));
+    window.addEventListener("scroll", pickActive, { passive: true });
+    window.addEventListener(
+      "resize",
+      () => {
+        calcOffset();
+        const active = $("#catTabs button.active");
+        if (active) ensureTabVisible(active, "auto");
+        pickActive();
+      },
+      { passive: true }
+    );
+  }
*** End Patch
